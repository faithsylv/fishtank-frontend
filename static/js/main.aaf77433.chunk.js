(this["webpackJsonpfishtank-frontend"]=this["webpackJsonpfishtank-frontend"]||[]).push([[0],{36:function(e,t,n){},37:function(e,t,n){},60:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),s=n(20),r=n.n(s),o=(n(36),n(37),n(6)),i=n.n(o),l=n(4),u=n(10),b=n(2),j=n(11),h=n(3),p=n(1),d=c.a.createContext([{},function(){}]),f={},O=function(e){var t=Object(a.useState)(f),n=Object(b.a)(t,2),c=n[0],s=n[1];return Object(p.jsx)(d.Provider,{value:[c,s],children:e.children})},m=n(27),x=n(28),g=n(31),k=n(30),v=function(e){Object(g.a)(n,e);var t=Object(k.a)(n);function n(){return Object(m.a)(this,n),t.apply(this,arguments)}return Object(x.a)(n,[{key:"render",value:function(){return Object(p.jsx)("div",{children:"I'm the homepage!"})}}]),n}(a.Component),y=n(14),w=function(e){return Object(y.a)(e),Object(p.jsx)("div",{children:"I'm the About page!"})},N=function(e){return Object(y.a)(e),Object(p.jsx)("div",{children:"About Current Open Source Research Project Manta ray catshark shaking filefish. Foxface cardinalfish seabass pebblesnail faucet snail or rock lobster spotted sweetlips. Hippo tang pebblesnail fins raced. Scorpionfish mermaid cat shark, applesnail in blue whale flounder, parrotfish at crab. Banana wrasse in yellow pseudochromis non mermaid parrotfish mystery snail. Nurse shark at goatfish grey whale. The crackin crazy Neo. Goby nurse shark moon. Neon goby banded grunt kelp snowcrab, fingernail clam stingray colorful gold damsel. Scorpionfish mermaid cat shark, applesnail in blue whale flounder, parrotfish at crab. Swimming are milk shark zebra moray est. Coral hogfish fingernail clam in tilefish mandarinfish crab lionfish weasel shark. Quagga mussel cat shark is batfish frogfish. Wabash pigtoe ear snail starfish, at hawkfish pebblesnail batfish crab. Wobbegong shark blue whale gold damsel faucet snail, in snake eel sea cora."})},C=function(){var e=Object(a.useContext)(d),t=Object(b.a)(e,2),n=t[0],c=t[1],s=Object(a.useCallback)((function(){fetch("https://fishtank-server.herokuapp.com/users/me",{method:"GET",credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(n.token)}}).then(function(){var e=Object(u.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t.ok){e.next=7;break}return e.next=3,t.json();case 3:n=e.sent,c((function(e){return console.log("user data is:",n),Object(l.a)(Object(l.a)({},e),{},{details:n})})),e.next=8;break;case 7:c((function(e){return Object(l.a)(Object(l.a)({},e),{},{details:null})}));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[c,n.token]);return Object(a.useEffect)((function(){n.details||s()}),[n.details,s]),Object(p.jsxs)("div",{children:[Object(p.jsx)("h1",{children:"Contribute to Our Research Project"}),n.details?Object(p.jsxs)("p",{children:["Welcome\xa0",n.details.firstName,n.details.lastName]}):""]})},S=n(15),I=n.n(S),T=function(e){var t=Object(h.f)(),n=Object(a.useState)(!1),c=Object(b.a)(n,2),s=c[0],r=c[1],o=Object(a.useState)(""),j=Object(b.a)(o,2),f=(j[0],j[1]),O=Object(a.useContext)(d),m=Object(b.a)(O,2),x=(m[0],m[1]),g=Object(a.useState)("test@gmail.com"),k=Object(b.a)(g,2),v=k[0],y=k[1],w=Object(a.useState)("chicken"),N=Object(b.a)(w,2),C=N[0],S=N[1];return Object(p.jsx)("div",{className:"login-component",children:Object(p.jsxs)("form",{onSubmit:function(n){n.preventDefault(),r(!0),I()(".form-button").html("Logging in..."),f("");var a="Something went wrong! Please try again.";fetch("https://fishtank-server.herokuapp.com/users/login",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({username:v,password:C})}).then(function(){var n=Object(u.a)(i.a.mark((function n(c){var s;return i.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r(!1),c.ok){n.next=5;break}400===c.status?f("Please fill all the fields correctly!"):401===c.status?f("Invalid email and password combination."):f(a),n.next=12;break;case 5:return n.next=7,c.json();case 7:s=n.sent,console.log("data",s),x((function(e){return Object(l.a)(Object(l.a)({},e),{},{token:s.token})})),e.handleClose(),t.push("/research-project/contribute");case 12:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()).catch((function(e){r(!1),f(a)}))},className:"login-form",children:[Object(p.jsx)("input",{className:"input-item email",placeholder:"email",type:"email",name:"email",value:v,onInput:function(e){return y(e.target.value)}}),Object(p.jsx)("input",{className:"input-item password",placeholder:"password",type:"password",name:"password",value:C,onInput:function(e){return S(e.target.value)}}),Object(p.jsx)("button",{className:"form-button",type:"submit",disabled:s,children:"Log In"})]})})},P=function(e){var t=Object(a.useState)(!1),n=Object(b.a)(t,2),c=n[0],s=n[1],r=Object(a.useState)(""),o=Object(b.a)(r,2),j=(o[0],o[1]),f=Object(a.useContext)(d),O=Object(b.a)(f,2),m=(O[0],O[1]),x=Object(a.useState)(""),g=Object(b.a)(x,2),k=g[0],v=g[1],y=Object(a.useState)(""),w=Object(b.a)(y,2),N=w[0],C=w[1],S=Object(a.useState)(""),T=Object(b.a)(S,2),P=T[0],L=T[1],A=Object(a.useState)(""),F=Object(b.a)(A,2),B=F[0],E=F[1],R=Object(a.useState)(""),z=Object(b.a)(R,2),D=z[0],J=z[1],M=Object(h.f)();return Object(p.jsx)("div",{className:"login-component",children:Object(p.jsxs)("form",{onSubmit:function(t){t.preventDefault(),s(!0),I()(".form-button").html("Signing you up..."),j("");var n="Something went wrong! Please try again later.";fetch("https://fishtank-server.herokuapp.com/users/signup",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({firstName:k,lastName:N,institutionName:P,username:B,password:D})}).then(function(){var t=Object(u.a)(i.a.mark((function t(a){var c,r;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(s(!1),a.ok){t.next=21;break}if(400!==a.status){t.next=6;break}j("Please fill all the fields correctly!"),t.next=19;break;case 6:if(401!==a.status){t.next=10;break}j("Invalid email and password combination."),t.next=19;break;case 10:if(500!==a.status){t.next=18;break}return console.log(a),t.next=14,a.json();case 14:(c=t.sent).message&&j(c.message||n),t.next=19;break;case 18:j(n);case 19:t.next=28;break;case 21:return t.next=23,a.json();case 23:r=t.sent,m((function(e){return Object(l.a)(Object(l.a)({},e),{},{token:r.token})})),console.log("token data:",r.token),e.handleClose(),M.push("/");case 28:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){s(!1),j(n)}))},className:"login-form",children:[Object(p.jsx)("input",{className:"input-item first-name",placeholder:"First Name",name:"first-name",value:k,onInput:function(e){return v(e.target.value)}}),Object(p.jsx)("input",{className:"input-item last-name",placeholder:"LastName",name:"last-name",value:N,onInput:function(e){return C(e.target.value)}}),Object(p.jsx)("input",{className:"input-item institution-name",placeholder:"Institution Name",name:"institution-name",value:P,onInput:function(e){return L(e.target.value)}}),Object(p.jsx)("input",{className:"input-item email",placeholder:"email",type:"email",name:"email",value:B,onInput:function(e){return E(e.target.value)}}),Object(p.jsx)("input",{className:"input-item password",placeholder:"password",type:"password",name:"password",value:D,onInput:function(e){return J(e.target.value)}}),Object(p.jsx)("button",{className:"form-button",type:"submit",disabled:c,children:"Sign up"})]})})},L=function(e){var t=Object(a.useContext)(d),n=Object(b.a)(t,2),c=n[0],s=n[1],r=Object(h.f)();return Object(p.jsx)("button",{onClick:function(){fetch("https://fishtank-server.herokuapp.com/users/logout",{credentials:"include",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat(c.token)}}).then(function(){var e=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:s((function(e){return Object(l.a)(Object(l.a)({},e),{},{details:void 0,token:null})})),window.localStorage.setItem("logout",Date.now()),r.push("/");case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())},className:"logout-button",children:"Log Out"})},A=n(16),F=n.n(A);F.a.setAppElement("#root");var B=function(e){var t=Object(a.useContext)(d),n=Object(b.a)(t,2),c=n[0],s=n[1],r=Object(a.useState)(!1),o=Object(b.a)(r,2),f=o[0],O=o[1],m=Object(a.useState)(!1),x=Object(b.a)(m,2),g=x[0],k=x[1],y=function(){!0===g&&k(!1),O(!0)},S=function(){O(!1)},I=function(){!0===f&&O(!1),k(!0)},A=function(){k(!1)},B=Object(a.useCallback)((function(){console.log("verifying..."),fetch("https://fishtank-server.herokuapp.com/users/refreshToken",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"}}).then(function(){var e=Object(u.a)(i.a.mark((function e(t){var n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(console.log("response is: ",t),!t.ok){e.next=8;break}return e.next=4,t.json();case 4:n=e.sent,s((function(e){return Object(l.a)(Object(l.a)({},e),{},{token:n.token})})),e.next=9;break;case 8:s((function(e){return Object(l.a)(Object(l.a)({},e),{},{token:null})}));case 9:setTimeout(B,3e5);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}),[s]);return Object(a.useEffect)((function(){console.log("verifying user"),B()}),[B]),Object(p.jsx)(j.a,{children:Object(p.jsxs)("div",{children:[Object(p.jsxs)("ul",{children:[Object(p.jsx)("li",{children:Object(p.jsx)(j.b,{to:"/",children:"Home"})}),Object(p.jsx)("li",{children:Object(p.jsx)(j.b,{to:"/about",children:"About Us"})}),Object(p.jsx)("li",{children:Object(p.jsx)(j.b,{to:"/research-project",children:"Open Source Research"})}),Object(p.jsx)("li",{children:Object(p.jsx)(j.b,{to:"/research-project/contribute",children:"Contribute"})})]}),Object(p.jsxs)("div",{children:[c.token?"":Object(p.jsx)("button",{onClick:y,className:"login-button",children:"Log In"}),Object(p.jsxs)(F.a,{isOpen:f,className:"Modal login",overlayClassName:"Overlay",onRequestClose:S,contentLabel:"login popup",children:[Object(p.jsx)("button",{onClick:S,className:"modal-close",children:"X"}),Object(p.jsx)(T,{handleClose:S}),Object(p.jsxs)("div",{children:["Not a member?  ",Object(p.jsx)("a",{onClick:I,children:"Sign Up"})]})]}),c.token?Object(p.jsx)(L,{}):"",c.token?"":Object(p.jsx)("button",{onClick:I,className:"login-button",children:"Sign Up"}),Object(p.jsxs)(F.a,{isOpen:g,className:"Modal login",overlayClassName:"Overlay",onRequestClose:A,contentLabel:"login popup",children:[Object(p.jsx)("button",{onClick:A,className:"modal-close",children:"X"}),Object(p.jsx)(P,{handleClose:A}),Object(p.jsxs)("div",{children:["Already a member? ",Object(p.jsx)("a",{onClick:y,children:"Log In"})]})]})]}),Object(p.jsx)("hr",{}),Object(p.jsxs)(h.c,{children:[Object(p.jsx)(h.a,{exact:!0,path:"/",children:Object(p.jsx)(v,{})}),Object(p.jsx)(h.a,{exact:!0,path:"/about",children:Object(p.jsx)(w,{})}),Object(p.jsx)(h.a,{exact:!0,path:"/research-project",children:Object(p.jsx)(N,{})}),Object(p.jsx)(h.a,{exact:!0,path:"/research-project/contribute",children:Object(p.jsx)(C,{})})]})]})})};var E=function(){return Object(p.jsx)("div",{className:"App",children:Object(p.jsx)(O,{children:Object(p.jsx)(B,{})})})},R=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,61)).then((function(t){var n=t.getCLS,a=t.getFID,c=t.getFCP,s=t.getLCP,r=t.getTTFB;n(e),a(e),c(e),s(e),r(e)}))};n(57).config(),r.a.render(Object(p.jsx)(c.a.StrictMode,{children:Object(p.jsx)(E,{})}),document.getElementById("root")),R()}},[[60,1,2]]]);
//# sourceMappingURL=main.aaf77433.chunk.js.map